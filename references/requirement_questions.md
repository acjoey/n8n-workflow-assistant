# 需求澄清问题清单

在设计 n8n 工作流前，需要确认以下信息。

## 基础信息

### 1. 工作流目标

- 这个工作流要解决什么问题？
- 预期的最终效果是什么？

### 2. 触发方式

| 类型 | 说明 | 常用节点 |
|------|------|----------|
| 手动触发 | 用户手动启动 | `manualTrigger` |
| 定时触发 | 按时间计划执行 | `scheduleTrigger` |
| Webhook | 外部系统调用 | `webhook` |
| 表单提交 | 用户填写表单触发 | `formTrigger` |
| 事件驱动 | 特定事件触发 | 各种 `*Trigger` 节点 |

**确认问题**：
- 何时需要执行这个工作流？
- 如果是定时，频率是多少？（每分钟/每小时/每天）
- 如果是事件触发，是什么事件？

## 数据流

### 3. 输入源

| 类型 | 示例 | 常用节点 |
|------|------|----------|
| API | REST API, GraphQL | `httpRequest` |
| 数据库 | MySQL, PostgreSQL, MongoDB | `mySql`, `postgres`, `mongoDb` |
| 文件 | CSV, Excel, JSON | `readBinaryFile`, `spreadsheetFile` |
| 云服务 | Google Sheets, Airtable | `googleSheets`, `airtable` |
| 消息 | Email, Slack, Telegram | `gmail`, `slack`, `telegram` |

**确认问题**：
- 数据从哪里来？
- 数据格式是什么？（JSON/CSV/XML 等）
- 是否需要认证？认证方式是什么？

### 4. 数据处理

| 操作 | 说明 | 常用节点 |
|------|------|----------|
| 过滤 | 按条件筛选数据 | `if`, `filter`, `switch` |
| 转换 | 修改数据格式/字段 | `set`, `code` |
| 合并 | 合并多个数据源 | `merge` |
| 拆分 | 将数据拆分处理 | `splitInBatches`, `splitOut` |
| AI 处理 | 使用 AI 分析/生成 | `openAi`, `agent` |

**确认问题**：
- 需要对数据做什么处理？
- 是否需要 AI 参与？需要什么 AI 能力？
- 是否有条件分支逻辑？

### 5. 输出目标

| 类型 | 示例 | 常用节点 |
|------|------|----------|
| 存储 | 数据库、文件、云存储 | `postgres`, `googleDrive`, `s3` |
| 通知 | Email、Slack、企业微信 | `emailSend`, `slack`, `telegram` |
| API | 调用外部 API | `httpRequest` |
| 更新 | 更新原有数据 | 各种服务节点的 Update 操作 |

**确认问题**：
- 处理结果要发送到哪里？
- 输出格式要求是什么？
- 是否需要发送通知？通知给谁？

## 异常处理

### 6. 错误处理

**确认问题**：
- 如果某个步骤失败，如何处理？
- 是否需要重试？重试几次？
- 是否需要错误告警？告警渠道是什么？

### 7. 日志和监控

**确认问题**：
- 是否需要记录执行日志？
- 是否需要执行统计（成功率、耗时等）？

## 环境信息

### 8. n8n 实例

**确认问题**：
- 使用哪个 n8n 实例？（本地/公司服务器/云服务）
- 是否已配置 API Key？
- 是否有现有的凭据（Credentials）可复用？

### 9. 约束条件

**确认问题**：
- 是否有执行时间限制？
- 是否有数据量限制？
- 是否有安全/合规要求？

---

## 快速问卷模板

对于简单需求，可以用以下模板快速收集信息：

```
1. 目标：[工作流要做什么]
2. 触发：[手动/定时/Webhook/事件]
3. 输入：[数据来源]
4. 处理：[需要的处理逻辑]
5. 输出：[结果发送到哪里]
6. 错误：[失败时如何处理]
```
